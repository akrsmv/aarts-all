Reading invoke payload from stdin (you can also pass it from file with --event)
Invoking index.handler (nodejs12.x)
airtoursappsyncModulesBEED5E65 is a local Layer in the template
Building image...
Requested to skip pulling images ...

Mounting C:\Users\TechHuddle\Documents\aarts-all\example-app\airtours-appsync\airtours-appsync\dist as /var/task:ro,delegated inside runtime container
[32mSTART RequestId: ff3d0c63-4c24-1dde-0959-602249cc6d2c Version: $LATEST[0m
2020-08-25T07:47:47.062Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	received SQS message:  {
    "Records": [
        {
            "messageId": "19dd0b57-b21e-4ac1-bd88-01bbb068cb78",
            "receiptHandle": "MessageReceiptHandle",
            "body": "{\"payload\":{\"arguments\":{},\"identity\":{\"username\":\"akrsmv\"}}}",
            "attributes": {
                "ApproximateReceiveCount": "1",
                "SentTimestamp": "1523232000000",
                "SenderId": "123456789012",
                "ApproximateFirstReceiveTimestamp": "1523232000001"
            },
            "messageAttributes": {
                "eventSource": {
                    "dataType": "String",
                    "stringValue": "worker:input"
                },
                "action": {
                    "dataType": "String",
                    "stringValue": "start"
                },
                "item": {
                    "dataType": "String",
                    "stringValue": "test_data_generator"
                },
                "ringToken": {
                    "dataType": "String",
                    "stringValue": "1598341655415_449838.96741890785"
                }
            },
            "md5OfBody": "7b270e59b47ff90a553787216d55d91d",
            "eventSource": "aws:sqs",
            "eventSourceARN": "arn:aws:sqs:us-east-1:123456789012:MyQueue",
            "awsRegion": "us-east-1"
        }
    ]
}
2020-08-25T07:47:47.066Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	parsed aartsEvent from SQS is  {
  payload: { arguments: {}, identity: { username: 'akrsmv' } },
  meta: {
    item: 'test_data_generator',
    action: 'start',
    ringToken: '1598341655415_449838.96741890785',
    eventSource: 'worker:input'
  }
}
2020-08-25T07:47:47.066Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[test_data_generator:start]  {
    "payload": {
        "arguments": "[AartsHandler:processPayloadAsync] Will Invoke test_data_generator:start manager action"
    },
    "meta": {
        "item": "test_data_generator",
        "action": "start",
        "ringToken": "1598341655415_449838.96741890785",
        "eventSource": "worker:input"
    }
}
2020-08-25T07:47:47.067Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[AartsHandler:processPayloadAsync] Will Invoke test_data_generator:start manager action"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:start' },
    action: { DataType: 'String', StringValue: 'start' },
    item: { DataType: 'String', StringValue: 'test_data_generator' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.067Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[test_data_generator:start]  {
    "payload": {
        "arguments": "[test_data_generator:CREATE] Begin CREATE. Doing a gate check of payload"
    },
    "meta": {
        "item": "test_data_generator",
        "action": "start",
        "ringToken": "1598341655415_449838.96741890785",
        "eventSource": "worker:input"
    }
}
2020-08-25T07:47:47.068Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[test_data_generator:CREATE] Begin CREATE. Doing a gate check of payload"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:start' },
    action: { DataType: 'String', StringValue: 'start' },
    item: { DataType: 'String', StringValue: 'test_data_generator' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.068Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[test_data_generator:start]  {
    "payload": {
        "arguments": "[test_data_generator:baseValidateStart] START. checking for mandatory item keys: {\n    \"arguments\": [\n        {}\n    ],\n    \"identity\": {\n        \"username\": \"akrsmv\"\n    },\n    \"ringToken\": \"1598341655415_449838.96741890785\"\n}"
    },
    "meta": {
        "item": "test_data_generator",
        "action": "start",
        "ringToken": "1598341655415_449838.96741890785",
        "eventSource": "worker:input"
    }
}
2020-08-25T07:47:47.068Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[test_data_generator:baseValidateStart] START. checking for mandatory item keys: {\\n    \\"arguments\\": [\\n        {}\\n    ],\\n    \\"identity\\": {\\n        \\"username\\": \\"akrsmv\\"\\n    },\\n    \\"ringToken\\": \\"1598341655415_449838.96741890785\\"\\n}"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:start' },
    action: { DataType: 'String', StringValue: 'start' },
    item: { DataType: 'String', StringValue: 'test_data_generator' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.069Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[test_data_generator:start]  {
    "payload": {
        "arguments": "[test_data_generator:START] Procedure applicable for Starting."
    },
    "meta": {
        "item": "test_data_generator",
        "action": "start",
        "ringToken": "1598341655415_449838.96741890785",
        "eventSource": "worker:input"
    }
}
2020-08-25T07:47:47.069Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[test_data_generator:START] Procedure applicable for Starting."',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:start' },
    action: { DataType: 'String', StringValue: 'start' },
    item: { DataType: 'String', StringValue: 'test_data_generator' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.070Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[country:create]  {
    "payload": {
        "arguments": "[AartsHandler:processPayloadAsync] Will Invoke country:create manager action"
    },
    "meta": {
        "action": "create",
        "item": "country",
        "eventSource": "worker:input",
        "ringToken": "1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858"
    }
}
2020-08-25T07:47:47.070Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[AartsHandler:processPayloadAsync] Will Invoke country:create manager action"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:create' },
    action: { DataType: 'String', StringValue: 'create' },
    item: { DataType: 'String', StringValue: 'country' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.071Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[country:create]  {
    "payload": {
        "arguments": "[country:CREATE] Begin CREATE. Doing a gate check of payload"
    },
    "meta": {
        "action": "create",
        "item": "country",
        "eventSource": "worker:input",
        "ringToken": "1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858"
    }
}
2020-08-25T07:47:47.071Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[country:CREATE] Begin CREATE. Doing a gate check of payload"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:create' },
    action: { DataType: 'String', StringValue: 'create' },
    item: { DataType: 'String', StringValue: 'country' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.071Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[country:create]  {
    "payload": {
        "arguments": "[country:baseValidateCreate] START. checking for mandatory item keys: {\n    \"arguments\": [\n        {\n            \"procedure\": \"test_data_generator|fc6f8627-d22d-4f85-8217-3afa9d46527c\",\n            \"name\": \"Bulgaria\",\n            \"currency\": \"BGN\",\n            \"code\": \"BG\"\n        }\n    ],\n    \"identity\": {\n        \"username\": \"akrsmv\"\n    },\n    \"ringToken\": \"1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858\"\n}"
    },
    "meta": {
        "action": "create",
        "item": "country",
        "eventSource": "worker:input",
        "ringToken": "1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858"
    }
}
2020-08-25T07:47:47.072Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[country:baseValidateCreate] START. checking for mandatory item keys: {\\n    \\"arguments\\": [\\n        {\\n            \\"procedure\\": \\"test_data_generator|fc6f8627-d22d-4f85-8217-3afa9d46527c\\",\\n            \\"name\\": \\"Bulgaria\\",\\n            \\"currency\\": \\"BGN\\",\\n            \\"code\\": \\"BG\\"\\n        }\\n    ],\\n    \\"identity\\": {\\n        \\"username\\": \\"akrsmv\\"\\n    },\\n    \\"ringToken\\": \\"1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858\\"\\n}"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:create' },
    action: { DataType: 'String', StringValue: 'create' },
    item: { DataType: 'String', StringValue: 'country' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.072Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	Using supplied ring token for item creation id:  1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858
2020-08-25T07:47:47.072Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	itemToCreate:  {
    "name": "Bulgaria",
    "currency": "BGN",
    "code": "BG",
    "id": "country|1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858",
    "meta": "v_0|country",
    "item_type": "country",
    "revisions": 0,
    "date_created": "2020-08-25T07:47:47.072Z",
    "date_updated": "2020-08-25T07:47:47.072Z",
    "procedure": "test_data_generator|fc6f8627-d22d-4f85-8217-3afa9d46527c"
}
2020-08-25T07:47:47.072Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[country:create]  {
    "payload": {
        "arguments": "[country:CREATE] Item applicable for saving. END."
    },
    "meta": {
        "action": "create",
        "item": "country",
        "eventSource": "worker:input",
        "ringToken": "1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858"
    }
}
2020-08-25T07:47:47.072Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[country:CREATE] Item applicable for saving. END."',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:create' },
    action: { DataType: 'String', StringValue: 'create' },
    item: { DataType: 'String', StringValue: 'country' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.073Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[country:create]  {
    "payload": {
        "arguments": "[country:SAVE] BEGIN"
    },
    "meta": {
        "action": "create",
        "item": "country",
        "eventSource": "worker:input",
        "ringToken": "1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858"
    }
}
2020-08-25T07:47:47.073Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[country:SAVE] BEGIN"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:create' },
    action: { DataType: 'String', StringValue: 'create' },
    item: { DataType: 'String', StringValue: 'country' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.073Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	[country:create]  {
    "payload": {
        "arguments": "[country:SAVE] Analyzing item refkeys, [\n    {\n        \"key\": \"name\",\n        \"unique\": true\n    }\n]"
    },
    "meta": {
        "action": "create",
        "item": "country",
        "eventSource": "worker:input",
        "ringToken": "1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858"
    }
}
2020-08-25T07:47:47.073Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	--->MOCK SNS/MESSAGE START {
  Message: '"[country:SAVE] Analyzing item refkeys, [\\n    {\\n        \\"key\\": \\"name\\",\\n        \\"unique\\": true\\n    }\\n]"',
  MessageAttributes: {
    eventSource: { DataType: 'String', StringValue: 'worker:output:create' },
    action: { DataType: 'String', StringValue: 'create' },
    item: { DataType: 'String', StringValue: 'country' },
    ringToken: {
      DataType: 'String',
      StringValue: '1598341655415_449838.96741890785_8b00f899-e915-424c-a4ab-a6731f0c8858'
    }
  },
  TopicArn: 'EventsBus45DE4339'
} <---MOCK SNS/MESSAGE END
2020-08-25T07:47:47.073Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	INFO	In transactPutItem. refkeys [
    {
        "key": "name",
        "unique": true
    }
]
2020-08-25T07:47:47.144Z	ff3d0c63-4c24-1dde-0959-602249cc6d2c	ERROR	Unhandled Promise Rejection 	{"errorType":"Runtime.UnhandledPromiseRejection","errorMessage":"Error: {\n    \"cancellationReasons\": [\n        {\n            \"Item\": {\n                \"meta\": {\n                    \"S\": \"Bulgaria\"\n                },\n                \"id\": {\n                    \"S\": \"uq|country}name\"\n                }\n            },\n            \"Code\": \"ConditionalCheckFailed\",\n            \"Message\": \"The conditional request failed\"\n        }\n    ],\n    \"err\": {\n        \"message\": \"Transaction cancelled, please refer cancellation reasons for specific reasons [None, None, ConditionalCheckFailed]\",\n        \"code\": \"TransactionCanceledException\",\n        \"time\": \"2020-08-25T07:47:47.140Z\",\n        \"requestId\": \"16b693fd-659f-4b8a-b671-536d620f93e8\",\n        \"statusCode\": 400,\n        \"retryable\": false,\n        \"retryDelay\": 6.623886567521664\n    }\n}","reason":{"errorType":"Error","errorMessage":"{\n    \"cancellationReasons\": [\n        {\n            \"Item\": {\n                \"meta\": {\n                    \"S\": \"Bulgaria\"\n                },\n                \"id\": {\n                    \"S\": \"uq|country}name\"\n                }\n            },\n            \"Code\": \"ConditionalCheckFailed\",\n            \"Message\": \"The conditional request failed\"\n        }\n    ],\n    \"err\": {\n        \"message\": \"Transaction cancelled, please refer cancellation reasons for specific reasons [None, None, ConditionalCheckFailed]\",\n        \"code\": \"TransactionCanceledException\",\n        \"time\": \"2020-08-25T07:47:47.140Z\",\n        \"requestId\": \"16b693fd-659f-4b8a-b671-536d620f93e8\",\n        \"statusCode\": 400,\n        \"retryable\": false,\n        \"retryDelay\": 6.623886567521664\n    }\n}","stack":["Error: {","    \"cancellationReasons\": [","        {","            \"Item\": {","                \"meta\": {","                    \"S\": \"Bulgaria\"","                },","                \"id\": {","                    \"S\": \"uq|country}name\"","                }","            },","            \"Code\": \"ConditionalCheckFailed\",","            \"Message\": \"The conditional request failed\"","        }","    ],","    \"err\": {","        \"message\": \"Transaction cancelled, please refer cancellation reasons for specific reasons [None, None, ConditionalCheckFailed]\",","        \"code\": \"TransactionCanceledException\",","        \"time\": \"2020-08-25T07:47:47.140Z\",","        \"requestId\": \"16b693fd-659f-4b8a-b671-536d620f93e8\",","        \"statusCode\": 400,","        \"retryable\": false,","        \"retryDelay\": 6.623886567521664","    }","}","    at Object.exports.ddbRequest (/opt/nodejs/node_modules/aarts-dynamodb/DynamoDbClient.js:72:15)","    at processTicksAndRejections (internal/process/task_queues.js:97:5)"]},"promise":{},"stack":["Runtime.UnhandledPromiseRejection: Error: {","    \"cancellationReasons\": [","        {","            \"Item\": {","                \"meta\": {","                    \"S\": \"Bulgaria\"","                },","                \"id\": {","                    \"S\": \"uq|country}name\"","                }","            },","            \"Code\": \"ConditionalCheckFailed\",","            \"Message\": \"The conditional request failed\"","        }","    ],","    \"err\": {","        \"message\": \"Transaction cancelled, please refer cancellation reasons for specific reasons [None, None, ConditionalCheckFailed]\",","        \"code\": \"TransactionCanceledException\",","        \"time\": \"2020-08-25T07:47:47.140Z\",","        \"requestId\": \"16b693fd-659f-4b8a-b671-536d620f93e8\",","        \"statusCode\": 400,","        \"retryable\": false,","        \"retryDelay\": 6.623886567521664","    }","}","    at process.<anonymous> (/var/runtime/index.js:35:15)","    at process.emit (events.js:315:20)","    at process.EventEmitter.emit (domain.js:482:12)","    at processPromiseRejections (internal/process/promises.js:209:33)","    at processTicksAndRejections (internal/process/task_queues.js:98:32)"]}
Function 'airtoursappsyncHandlerWorker3259AE92' timed out after 30 seconds
